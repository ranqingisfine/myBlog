---
<!--cover: /assets/images/cover2.jpg-->
icon: pen-to-square
date: 2025-02-26
category:
  - LeetCode 
tag:
  - 前缀和
star: true 
ticky: true


---

# 8.1.13 除自身以外数组的乘积

**题目**：

给你一个整数数组 `nums`，返回 数组 `answer` ，其中 `answer[i]` 等于 `nums` 中除了 `nums[i]` 之外其余各元素的乘积 。

题目数据 **保证** 数组 `nums`之中任意元素的全部前缀元素和后缀的乘积都在 **32 位** 整数范围内。

请 **不要使用除法，**且在 `O(n)` 时间复杂度内完成此题。

**分析**：

```
原数组：       [1       2       3       4]
左部分的乘积：   1       1      1*2    1*2*3
右部分的乘积： 2*3*4    3*4      4      1
结果：        1*2*3*4  1*3*4   1*2*4  1*2*3*1
```

从上面的图可以看出，当前位置的结果就是它左部分的乘积再乘以它右部分的乘积。因此需要进行两次遍历，第一次遍历用于求左部分的乘积，第二次遍历在求右部分的乘积的同时，再将最后的计算结果一起求出来



**代码**：

```java
class Solution {
    public int[] productExceptSelf(int[] nums) {
        int[] left=new int[nums.length];
        int[] right=new int[nums.length];
        int[] ans=new int[nums.length];
        left[0]=1;
        int lefttime=1;
        for (int i = 1; i < nums.length; i++) {
            lefttime*=nums[i-1];
            left[i]=lefttime;
        }

        right[right.length-1]=1;
        int righttime=1;
        for (int j = nums.length-2; j >=0; j--) {
            righttime*=nums[j+1];
            right[j]=righttime;
        }
        for (int i = 0; i < left.length; i++) {
            ans[i]=left[i]*right[i];
        }
        return ans;
    }
}
```

