"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[6115],{66262:(s,i)=>{i.A=(s,i)=>{const a=s.__vccOpts||s;for(const[s,n]of i)a[s]=n;return a}},35512:(s,i,a)=>{a.r(i),a.d(i,{comp:()=>t,data:()=>h});var n=a(20641);const l={},t=(0,a(66262).A)(l,[["render",function(s,i){return(0,n.uX)(),(0,n.CE)("div",null,i[0]||(i[0]=[(0,n.Fv)('<h1 id="_3-6-模板方法模式" tabindex="-1"><a class="header-anchor" href="#_3-6-模板方法模式"><span>3.6 模板方法模式</span></a></h1><h2 id="一、介绍" tabindex="-1"><a class="header-anchor" href="#一、介绍"><span>一、介绍</span></a></h2><p>抽象模板角色声明并实现，负责对基本方法的调度，一般以final修饰，不允许具体模板角色重写。模板方法一般也是一个具体方法。</p><p>钩子方法（Hook Method）是模板方法模式中的一种特殊方法，用于在抽象类中提供一个默认的实现，但允许具体子类选择性地进行重写或扩展。钩子方法允许子类在不改变算法骨架的情况下，对算法的某些步骤进行定制。</p><figure><img src="data:image/png;base64,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" alt="模版方法模式" tabindex="0" loading="lazy"><figcaption>模版方法模式</figcaption></figure><p>抽象模板角色声明并实现，负责对基本方法的调度，一般以<strong>final修饰</strong>，不允许具体模板角色重写。模板方法一般也是一个具体方法。</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> abstract</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AbstractClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> isNeedUnlock </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // 默认需要开锁</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /**</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     * 基本方法，子类需要实现</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     */</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> abstract</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> unlock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /**</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     * 基本方法，子类需要实现</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     */</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> abstract</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ride</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /**</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     * 钩子方法，子类可实现</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     *</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     * </span><span style="--shiki-light:#A626A4;--shiki-light-font-style:italic;--shiki-dark:#C678DD;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#383A42;--shiki-light-font-style:italic;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> isNeedUnlock</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     */</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> isNeedUnlock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">boolean</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> isNeedUnlock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">isNeedUnlock</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> isNeedUnlock;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /**</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     * 模板方法，负责调度基本方法，子类不可实现</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     */</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> use</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (isNeedUnlock) {</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            unlock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;========锁坏了，不用解锁========&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        ride</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>抽象模板角色定义了unlock和ride两个使用单车的基本方法，还有一个钩子方法，用来控制模板方法逻辑顺序，核心是use模板方法，用final修饰，该方法完成对基本方法调度。注意，模板方法中对基本方法的调度是<strong>有顺序有规则的</strong>。还有一点，基本方法都是protected修饰的，因为基本方法都是在以public修饰的模板方法中调用，并且可以由子类实现，并不需要暴露给其他类调用。</p><p>现在来看两个具体模板角色的实现：</p><p><strong>扫描开锁的单车</strong></p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 扫码开锁的单车</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ScanBicycle</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AbstractClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> unlock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;========&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;扫码开锁&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;========&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ride</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSimpleName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;骑起来很拉风&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> isNeedUnlock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">boolean</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> isNeedUnlock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">isNeedUnlock</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> isNeedUnlock;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>密码开锁的单车</strong></p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 密码开锁的单车</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CodeBicycle</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AbstractClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> unlock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;========&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;密码开锁&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;========&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ride</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSimpleName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;骑起来很拉风&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> isNeedUnlock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">boolean</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> isNeedUnlock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">isNeedUnlock</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> isNeedUnlock;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，相比之前的实现，现在两个具体类都不需要实现use方法，只负责实现基本方法的逻辑，职责上变得更加清晰了。</p><p>当我以百米冲刺的速度跑到共享单车面前时，发现这辆车的锁是坏掉的，也就是不用开锁，免费的，骑回家收藏也没问题。在代码中只要调用钩子方法isNeedUnlock就好，实现如下：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Client</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ScanBicycle</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> scanBicycle</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ScanBicycle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        scanBicycle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isNeedUnlock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        scanBicycle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">use</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        CodeBicycle</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> codeBicycle</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CodeBicycle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">\t\tcodeBicycle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isNeedUnlock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        codeBicycle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">use</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果如下：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>========锁坏了，不用解锁========</span></span>\n<span class="line"><span>ScanBicycle骑起来很拉风</span></span>\n<span class="line"><span>========密码开锁========</span></span>\n<span class="line"><span>CodeBicycle骑起来很拉风</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="二、spring中的模板方法" tabindex="-1"><a class="header-anchor" href="#二、spring中的模板方法"><span>二、Spring中的模板方法</span></a></h2><p>Spring中用到模板方法的比如有：RestTemplate, JdbcTemplate、JmsTemplate, JpaTemplate等。</p><h3 id="_1、jdbctemplate" tabindex="-1"><a class="header-anchor" href="#_1、jdbctemplate"><span>1、JdbcTemplate</span></a></h3><p>JDBC的操作流程，有加载驱动程序、获取连接、创建会话、执行SQL、处理结果、释放资源。倘若每次数据库操作都需要如此繁琐的步骤，那么程序员会疯，Spring对如此不友好的API设计早已看不下去，故针对原生JDBC进行了封装，即JdbcTemplate，JdbcTemplate的使用极其简单，一次数据库操作，基本只需一次API调用即可。</p><p>其封装思路正是采用了模板方法设计模式的套路，因为JDBC的操作明显就是一个按流程调用API的过程，其中获取资源、释放资源对所有的数据库操作都是一样的，只是SQL的执行不同而已。</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> JdbcTemplate</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> JdbcAccessor</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> JdbcOperations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>JdbcTemplate中的核心方法，即模板方法，JdbcTemplate对外提供的API最终会调用该方法，它定义了获取资源、执行SQL、释放资源这一基本流程：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\t@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Nullable</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">\tpublic</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> T</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> execute</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">StatementCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> action) throws DataAccessException {</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">\t\tAssert</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">notNull</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(action, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Callback object must not be null&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> </span></span>\n<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">\t\tConnection</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> con </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> DataSourceUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getConnection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">obtainDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>\n<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">\t\tStatement</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> stmt </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">\t\ttry</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">\t\t\tstmt </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> con</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">createStatement</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">\t\t\tapplyStatementSettings</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(stmt)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">\t\t\tT</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> result </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">doInStatement</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(stmt);</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">\t\t\thandleWarnings</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(stmt)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">\t\t\treturn</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">\t\t}</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">\t\tcatch</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">SQLException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> ex</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">\t\t\t// Release Connection early, to avoid potential connection pool deadlock</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">\t\t\t// in the case when the exception translator hasn&#39;t been initialized yet.</span></span>\n<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">\t\t\tString</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> sql </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getSql</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(action)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">\t\t\tJdbcUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">closeStatement</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(stmt);</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">\t\t\tstmt </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">\t\t\tDataSourceUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">releaseConnection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(con, </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">\t\t\tcon </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">\t\t\tthrow</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> translateException</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;StatementCallback&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> sql</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> ex)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">\t\t}</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">\t\tfinally</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">\t\t\tJdbcUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">closeStatement</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(stmt);</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">\t\t\tDataSourceUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">releaseConnection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(con, </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">\t\t}</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">\t}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、resttemplate" tabindex="-1"><a class="header-anchor" href="#_2、resttemplate"><span>2、RestTemplate</span></a></h3><p>RedisTemplate的执行流程同样是：获取请求、设置请求、发送请求、得到响应、处理结果、释放资源，这又是模板方法的套路。</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RestTemplate</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> InterceptingHttpAccessor</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RestOperations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>RestTemplate对外提供的API最终会调用该方法，它定义了获取请求、设置请求、发送请求、得到响应、处理结果、释放资源这一基本流程：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Nullable</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">\tprotected</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> T</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> doExecute</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">URI</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Nullable</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HttpMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Nullable</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RequestCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> requestCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\t\t\t@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Nullable</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ResponseExtractor</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> responseExtractor) throws RestClientException {</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> </span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">\t\tAssert</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">notNull</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(url, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&#39;url&#39; must not be null&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">\t\tAssert</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">notNull</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(method, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&#39;method&#39; must not be null&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">\t\tClientHttpResponse</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> response </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">\t\ttry</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>\n<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">\t\t\tClientHttpRequest</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> request </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> method)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">\t\t\tif</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (requestCallback </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">\t\t\t\trequestCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">doWithRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(request);</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">\t\t\t}</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">\t\t\tresponse </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">\t\t\thandleResponse</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> response)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">\t\t\tif</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (responseExtractor </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">\t\t\t\treturn</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> responseExtractor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">extractData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(response);</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">\t\t\t}</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">\t\t\telse</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">\t\t\t\treturn</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">\t\t\t}</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">\t\t}</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">\t\tcatch</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IOException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> ex</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>\n<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">\t\t\tString</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> resource </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">\t\t\tString</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> query </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getRawQuery</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">\t\t\tresource </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (query </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ?</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> resource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">substring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">resource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">indexOf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;?&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> resource)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">\t\t\tthrow</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ResourceAccessException</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;I/O error on &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\t\t\t\t\t&quot; request for </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> resource </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(),</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> ex)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">\t\t}</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">\t\tfinally</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">\t\t\tif</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (response </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">\t\t\t\tresponse</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">\t\t\t}</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">\t\t}</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">\t}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',31)]))}]]),h=JSON.parse('{"path":"/%E4%B8%89%E3%80%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3.6%20%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F.html","title":"3.6 模板方法模式","lang":"zh-CN","frontmatter":{"\x3c!--cover":"/assets/images/cover2.jpg--\x3e","icon":"pen-to-square","date":"2024-11-12T00:00:00.000Z","category":["设计模式"],"tag":["模版方法模式"],"star":true,"ticky":true,"description":"3.6 模板方法模式 一、介绍 抽象模板角色声明并实现，负责对基本方法的调度，一般以final修饰，不允许具体模板角色重写。模板方法一般也是一个具体方法。 钩子方法（Hook Method）是模板方法模式中的一种特殊方法，用于在抽象类中提供一个默认的实现，但允许具体子类选择性地进行重写或扩展。钩子方法允许子类在不改变算法骨架的情况下，对算法的某些步骤进...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/myBlog/%E4%B8%89%E3%80%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/3.6%20%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F.html"}],["meta",{"property":"og:site_name","content":"Java笔记"}],["meta",{"property":"og:title","content":"3.6 模板方法模式"}],["meta",{"property":"og:description","content":"3.6 模板方法模式 一、介绍 抽象模板角色声明并实现，负责对基本方法的调度，一般以final修饰，不允许具体模板角色重写。模板方法一般也是一个具体方法。 钩子方法（Hook Method）是模板方法模式中的一种特殊方法，用于在抽象类中提供一个默认的实现，但允许具体子类选择性地进行重写或扩展。钩子方法允许子类在不改变算法骨架的情况下，对算法的某些步骤进..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-12T06:42:06.000Z"}],["meta",{"property":"article:tag","content":"模版方法模式"}],["meta",{"property":"article:published_time","content":"2024-11-12T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-12T06:42:06.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"3.6 模板方法模式\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-11-12T00:00:00.000Z\\",\\"dateModified\\":\\"2024-11-12T06:42:06.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"冉庆\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"一、介绍","slug":"一、介绍","link":"#一、介绍","children":[]},{"level":2,"title":"二、Spring中的模板方法","slug":"二、spring中的模板方法","link":"#二、spring中的模板方法","children":[{"level":3,"title":"1、JdbcTemplate","slug":"_1、jdbctemplate","link":"#_1、jdbctemplate","children":[]},{"level":3,"title":"2、RestTemplate","slug":"_2、resttemplate","link":"#_2、resttemplate","children":[]}]}],"git":{"createdTime":1731393726000,"updatedTime":1731393726000,"contributors":[{"name":"ranqing","email":"2516488782@qq.com","commits":1}]},"readingTime":{"minutes":4.44,"words":1333},"filePathRelative":"三、设计模式/3.6 模板方法模式.md","localizedDate":"2024年11月12日","excerpt":"\\n<h2>一、介绍</h2>\\n<p>抽象模板角色声明并实现，负责对基本方法的调度，一般以final修饰，不允许具体模板角色重写。模板方法一般也是一个具体方法。</p>\\n<p>钩子方法（Hook Method）是模板方法模式中的一种特殊方法，用于在抽象类中提供一个默认的实现，但允许具体子类选择性地进行重写或扩展。钩子方法允许子类在不改变算法骨架的情况下，对算法的某些步骤进行定制。</p>\\n<figure><figcaption>模版方法模式</figcaption></figure>\\n<p>抽象模板角色声明并实现，负责对基本方法的调度，一般以<strong>final修饰</strong>，不允许具体模板角色重写。模板方法一般也是一个具体方法。</p>","autoDesc":true}')}}]);